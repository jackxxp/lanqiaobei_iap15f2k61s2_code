C51 COMPILER V9.60.7.0   SYS_MAIN                                                          02/03/2026 16:07:36 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE SYS_MAIN
OBJECT MODULE PLACED IN .\Objects\sys_main.obj
COMPILER INVOKED BY: C:\Program Files (x86)\keil\C51\BIN\C51.EXE sys_main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND 
                    -PRINT(.\Listings\sys_main.lst) TABS(2) OBJECT(.\Objects\sys_main.obj)

line level    source

   1          //sys_main.c
   2          #include "sys_main.h"
   3          
   4          //å†…éƒ¨å‡½æ•°
   5          
   6          void gpio_init()//GPIO æ¨¡å¼è®¾ç½®
   7          {
   8   1        P0M0 = 0x00; 
   9   1        P0M1 = 0x00;
  10   1        P1M0 = 0x00;
  11   1        P1M1 = 0x00;
  12   1        P2M0 = 0x00;
  13   1        P2M1 = 0x00;
  14   1        P3M0 = 0x00;
  15   1        P3M1 = 0x00;
  16   1        P4M0 = 0x00;
  17   1        P4M1 = 0x00;
  18   1        P5M0 = 0x00;
  19   1        P5M1 = 0x00;
  20   1        P6M0 = 0x00;
  21   1        P6M1 = 0x00;
  22   1        P7M0 = 0x00;
  23   1        P7M1 = 0x00;
  24   1      }
  25          
  26          void timer1_init()//å®šæ—¶å™¨1å¯åŠ¨
  27          {
  28   1        AUXR &= 0xBF; // å®šæ—¶å™¨æ—¶é’Ÿ12Tæ¨¡å¼
  29   1        TMOD &= 0x0F; // è®¾ç½®å®šæ—¶å™¨æ¨¡å¼
  30   1        TL1 = 0x18;   // è®¾ç½®å®šæ—¶åˆå§‹å€¼
  31   1        TH1 = 0xFC;   // è®¾ç½®å®šæ—¶åˆå§‹å€¼
  32   1        TF1 = 0;      // æ¸…é™¤TF1æ ‡å¿—
  33   1        TR1 = 1;      // å®šæ—¶å™¨1å¼€å§‹è®¡æ—¶
  34   1        ET1 = 1;      // ä½¿èƒ½å®šæ—¶å™¨1ä¸­æ–­
  35   1        
  36   1        EA = 1; //ä¸­æ–­æ€»å¼€å…³
  37   1      }
  38          void driver_init()//è®¾å¤‡åˆå§‹åŒ–
  39          {
  40   1        sys_main_decoder_set(4);//LEDç¯
  41   1        P0=0xff;
  42   1        sys_main_decoder_set(0);
  43   1      
  44   1        sys_main_decoder_set(6); //æ•°ç ç®¡ä½é€‰
  45   1        P0 = 0x00;
  46   1        sys_main_decoder_set(7);//æ•°ç ç®¡æ®µé€‰
  47   1        P0 = 0xff;
  48   1        sys_main_decoder_set(0);
  49   1      
  50   1        sys_main_decoder_set(5);//ç»§ç”µå™¨ä¸èœ‚é¸£å™¨
  51   1        P0 = 0xaf;
  52   1        sys_main_decoder_set(0);
  53   1      }
  54          
C51 COMPILER V9.60.7.0   SYS_MAIN                                                          02/03/2026 16:07:36 PAGE 2   

  55          
  56          //å¤–éƒ¨è°ƒç”¨å‡½æ•°
  57          
  58          void sys_main_mcu_init()//MCUåˆå§‹åŒ–
  59          {
  60   1        gpio_init();//GPIOæ¨¡å¼è®¾ç½®
  61   1        sys_main_decoder_set(0);//è¯‘ç å™¨åˆå§‹åŒ–
  62   1        driver_init();//è®¾å¤‡åˆå§‹åŒ–
  63   1        timer1_init();//å®šæ—¶å™¨1å¯åŠ¨
  64   1        
  65   1      
  66   1      }
  67          
  68          void sys_main_decoder_set(uint8 pin)
  69          {
  70   1          P2 = (P2 & 0x1F) | ((pin << 5) & 0xE0);// è¯»å–å½“å‰ P2 å€¼ï¼Œä¿ç•™ä½5ä½ï¼ˆP2.0ï½P2.4ï¼‰ï¼Œæ›¿æ
             -¢é«˜3ä½ï¼ˆP2.5ï½P2.7ï¼‰
  71   1      }
  72          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    130    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
